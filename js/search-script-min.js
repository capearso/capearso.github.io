!function(){"use strict";function t(){return 0}function e(){return p.length=0,p}function n(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){return p.push(t),p}function i(t,e,n,r){for(var i in t)if(!o(t[i],r.exclude)&&n.matches(t[i],e))return t}function o(t,e){for(var n=!1,r=0,i=(e=e||[]).length;r<i;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}var a=function(t,e){var n,r,i=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("GET",t,!0),i.onreadystatechange=(n=i,r=e,function(){if(4===n.readyState&&200===n.status)try{r(null,JSON.parse(n.responseText))}catch(t){r(t,null)}}),i.send()},u=new function(){this.matches=function(t,e){return function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var a=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===a)continue t;return!1}return!0}(e.toLowerCase(),t.toLowerCase())}},l=new function(){this.matches=function(t,e){return"string"==typeof t&&0<=(t=t.trim()).toLowerCase().indexOf(e.toLowerCase())}},c=function(t){return n(t)?r(t):(i=t,Boolean(i)&&"[object Array]"===Object.prototype.toString.call(i)?function(t){var i=[];e();for(var o=0,a=t.length;o<a;o++)n(t[o])&&i.push(r(t[o]));return i}(t):void 0);var i},s=function(t){return t?function(t,e,n,r){for(var o=[],a=0;a<t.length&&o.length<r.limit;a++){var u=i(t[a],e,n,r);u&&o.push(u)}return o}(p,t,d.searchStrategy,d).sort(d.sort):[]},f=function(e){(d=e||{}).fuzzy=e.fuzzy||!1,d.limit=e.limit||10,d.searchStrategy=e.fuzzy?u:l,d.sort=e.sort||t},p=[],d={fuzzy:!1,limit:10};d.searchStrategy=d.fuzzy?u:l,d.sort=t;var h=function(t){return v.template.replace(v.pattern,(function(e,n){var r=v.middleware(n,t[n],v.template);return void 0!==r?r:t[n]||e}))},m=function(t){v.pattern=t.pattern||v.pattern,v.template=t.template||v.template,"function"==typeof t.middleware&&(v.middleware=t.middleware)},v={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}},y=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r],void 0!==e[r]&&(n[r]=e[r]));return n},w=function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}};!function(t){function e(t){u.success(t),c(t),u.searchInput.addEventListener("input",(function(t){n(),i(t.target.value)}))}function n(){results=u.resultsContainer;let t=results.lastElementChild;for(;t;)results.removeChild(t),t=results.lastElementChild}function r(t){let e=document.createRange().createContextualFragment(t);u.resultsContainer.appendChild(e)}function i(t){var e;(e=t)&&0<e.length&&(n(),function(t){var e=t.length;if(0===e)return r(u.noResultsText);for(var n=0;n<e;n++)r(h(t[n]))}(s(t)))}function o(t){throw new Error("SimpleJekyllSearch --- "+t)}var u={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},l=["searchInput","resultsContainer","json"],p=function t(e){if(!((n=e)&&void 0!==n.required&&n.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");var n;if(!(this instanceof t))return new t(e);var r=e.required;this.getRequiredOptions=function(){return r},this.validate=function(t){var e=[];return r.forEach((function(n){void 0===t[n]&&e.push(n)})),e}}({required:l});t.SimpleJekyllSearch=function(t){var n;return 0<p.validate(t).length&&o("You must specify the following required options: "+l),u=y(u,t),m({template:u.searchResultTemplate,middleware:u.templateMiddleware}),f({fuzzy:u.fuzzy,limit:u.limit,sort:u.sortMiddleware}),w(u.json)?e(u.json):(n=u.json,a(n,(function(t,r){t&&o("failed to get JSON ("+n+")"),e(r)}))),{search:i}},t.SimpleJekyllSearch.init=t.SimpleJekyllSearch,"function"==typeof t.SimpleJekyllSearchInit&&t.SimpleJekyllSearchInit.call(this,t.SimpleJekyllSearch)}(window)}();