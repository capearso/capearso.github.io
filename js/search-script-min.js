!function(){"use strict";function t(){return 0}function e(){return p.length=0,p}function r(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function n(t){return p.push(t),p}function i(t,e,r,n){for(var i in t)if(!o(t[i],n.exclude)&&r.matches(t[i],e))return t}function o(t,e){for(var r=!1,n=0,i=(e=e||[]).length;n<i;n++){var o=e[n];!r&&new RegExp(t).test(o)&&(r=!0)}return r}var a=function(t,e){var r,n,i=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("GET",t,!0),i.onreadystatechange=(r=i,n=e,function(){if(4===r.readyState&&200===r.status)try{n(null,JSON.parse(r.responseText))}catch(t){n(t,null)}}),i.send()},u=new function(){this.matches=function(t,e){return function(t,e){var r=e.length,n=t.length;if(r<n)return!1;if(n===r)return t===e;t:for(var i=0,o=0;i<n;i++){for(var a=t.charCodeAt(i);o<r;)if(e.charCodeAt(o++)===a)continue t;return!1}return!0}(e.toLowerCase(),t.toLowerCase())}},l=new function(){this.matches=function(t,e){return"string"==typeof t&&0<=(t=t.trim()).toLowerCase().indexOf(e.toLowerCase())}},c=function(t){return r(t)?n(t):(i=t,Boolean(i)&&"[object Array]"===Object.prototype.toString.call(i)?function(t){var i=[];e();for(var o=0,a=t.length;o<a;o++)r(t[o])&&i.push(n(t[o]));return i}(t):void 0);var i},s=function(t){return t?function(t,e,r,n){for(var o=[],a=0;a<t.length&&o.length<n.limit;a++){var u=i(t[a],e,r,n);u&&o.push(u)}return o}(p,t,d.searchStrategy,d).sort(d.sort):[]},f=function(e){(d=e||{}).fuzzy=e.fuzzy||!1,d.limit=e.limit||10,d.searchStrategy=e.fuzzy?u:l,d.sort=e.sort||t},p=[],d={fuzzy:!1,limit:10};d.searchStrategy=d.fuzzy?u:l,d.sort=t;var h=function(t){return v.template.replace(v.pattern,(function(e,r){var n=v.middleware(r,t[r],v.template);return void 0!==n?n:t[r]||e}))},m=function(t){v.pattern=t.pattern||v.pattern,v.template=t.template||v.template,"function"==typeof t.middleware&&(v.middleware=t.middleware)},v={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}},y=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n],void 0!==e[n]&&(r[n]=e[n]));return r},w=function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}};!function(t){function e(t){u.success(t),c(t),u.searchInput.addEventListener("keyup",(function(t){var e;e=t.which,-1===[13,16,20,37,38,39,40,91].indexOf(e)&&(r(),i(t.target.value))}))}function r(){results=u.resultsContainer;let t=results.lastElementChild;for(;t;)results.removeChild(t),t=results.lastElementChild}function n(t){let e=document.createRange().createContextualFragment(t);u.resultsContainer.appendChild(e)}function i(t){var e;(e=t)&&0<e.length&&(r(),function(t){var e=t.length;if(0===e)return n(u.noResultsText);for(var r=0;r<e;r++)n(h(t[r]))}(s(t)))}function o(t){throw new Error("SimpleJekyllSearch --- "+t)}var u={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},l=["searchInput","resultsContainer","json"],p=function t(e){if(!((r=e)&&void 0!==r.required&&r.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");var r;if(!(this instanceof t))return new t(e);var n=e.required;this.getRequiredOptions=function(){return n},this.validate=function(t){var e=[];return n.forEach((function(r){void 0===t[r]&&e.push(r)})),e}}({required:l});t.SimpleJekyllSearch=function(t){var r;return 0<p.validate(t).length&&o("You must specify the following required options: "+l),u=y(u,t),m({template:u.searchResultTemplate,middleware:u.templateMiddleware}),f({fuzzy:u.fuzzy,limit:u.limit,sort:u.sortMiddleware}),w(u.json)?e(u.json):(r=u.json,a(r,(function(t,n){t&&o("failed to get JSON ("+r+")"),e(n)}))),{search:i}},t.SimpleJekyllSearch.init=t.SimpleJekyllSearch,"function"==typeof t.SimpleJekyllSearchInit&&t.SimpleJekyllSearchInit.call(this,t.SimpleJekyllSearch)}(window)}();