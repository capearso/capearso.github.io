!function(){"use strict";function t(){return 0}function e(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function n(t){return s.push(t),s}function r(t,e,n,r){for(var o in t)if(!i(t[o],r.exclude)&&n.matches(t[o],e))return t}function i(t,e){for(var n=!1,r=0,i=(e=e||[]).length;r<i;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}var o=new function(){this.matches=function(t,e){return function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var a=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===a)continue t;return!1}return!0}(e.toLowerCase(),t.toLowerCase())}},a=new function(){this.matches=function(t,e){return"string"==typeof t&&0<=(t=t.trim()).toLowerCase().indexOf(e.toLowerCase())}},u=function(t){return e(t)?n(t):(r=t,Boolean(r)&&"[object Array]"===Object.prototype.toString.call(r)?function(t){var r=[];s.length=0;for(var i=0,o=t.length;i<o;i++)e(t[i])&&r.push(n(t[i]));return r}(t):void 0);var r},l=function(t){return t?function(t,e,n,i){for(var o=[],a=0;a<t.length&&o.length<i.limit;a++){var u=r(t[a],e,n,i);u&&o.push(u)}return o}(s,t,f.searchStrategy,f).sort(f.sort):[]},c=function(e){(f=e||{}).fuzzy=e.fuzzy||!1,f.limit=e.limit||10,f.searchStrategy=e.fuzzy?o:a,f.sort=e.sort||t},s=[],f={fuzzy:!1,limit:10};f.searchStrategy=f.fuzzy?o:a,f.sort=t;var p=function(t){return d.template.replace(d.pattern,(function(e,n){var r=d.middleware(n,t[n],d.template);return void 0!==r?r:t[n]||e}))},d={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}};!function(t){function e(t){a.success(t),u(t),a.searchInput.addEventListener("input",(function(t){n(),i(t.target.value)}))}function n(){let t=a.resultsContainer,e=t.lastElementChild;for(;e;)t.removeChild(e),e=t.lastElementChild}function r(t){let e=document.createRange().createContextualFragment(t);a.resultsContainer.appendChild(e)}function i(t){var e;(e=t)&&0<e.length&&(n(),function(t){var e=t.length;if(0===e)return r(a.noResultsText);for(var n=0;n<e;n++)r(p(t[n]))}(l(t)))}function o(t){throw new Error("SimpleJekyllSearch --- "+t)}var a={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},s=["searchInput","resultsContainer","json"],f=function t(e){if(!((n=e)&&void 0!==n.required&&n.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");var n;if(!(this instanceof t))return new t(e);var r=e.required;this.getRequiredOptions=function(){return r},this.validate=function(t){var e=[];return r.forEach((function(n){void 0===t[n]&&e.push(n)})),e}}({required:s});t.SimpleJekyllSearch=function(t){var n;return 0<f.validate(t).length&&o("You must specify the following required options: "+s),function(t){d.pattern=t.pattern||d.pattern,d.template=t.template||d.template,"function"==typeof t.middleware&&(d.middleware=t.middleware)}({template:(a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r],void 0!==e[r]&&(n[r]=e[r]));return n}(a,t)).searchResultTemplate,middleware:a.templateMiddleware}),c({fuzzy:a.fuzzy,limit:a.limit,sort:a.sortMiddleware}),function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}}(a.json)?e(a.json):function(t,e){var n,r,i=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("GET",t,!0),i.onreadystatechange=(n=i,r=e,function(){if(4===n.readyState&&200===n.status)try{r(null,JSON.parse(n.responseText))}catch(t){r(t,null)}}),i.send()}(n=a.json,(function(t,r){t&&o("failed to get JSON ("+n+")"),e(r)})),{search:i}},t.SimpleJekyllSearch.init=t.SimpleJekyllSearch,"function"==typeof t.SimpleJekyllSearchInit&&t.SimpleJekyllSearchInit.call(this,t.SimpleJekyllSearch)}(window)}();